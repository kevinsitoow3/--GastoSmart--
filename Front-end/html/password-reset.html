<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambio de Contraseña - GastoSmart</title>
    
    <!-- Estilos de autenticación -->
    <link rel="stylesheet" href="/static/css/auth/main/auth-main.css?v=DEV">
</head>
<body>
    <div class="container">
        <div class="password-reset">
            <div class="password-reset__grid">
                <!-- Panel izquierdo (branding + bullets) -->
                <div class="password-reset__left">
                    <div class="brand">
                        <div class="brand__logo">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h1 class="brand__title">GastoSmart</h1>
                        <p class="brand__subtitle">
                            Bienvenido de vuelta. Accede a tu cuenta para continuar
                            gestionando tus finanzas de manera inteligente
                        </p>
                    </div>
                    
                    <ul class="features">
                        <li class="feature">
                            <div class="feature__icon">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="feature__content">
                                <h3 class="feature__title">Acceso Seguro</h3>
                                <p class="feature__desc">Tu información está protegida con encriptación avanzada</p>
                            </div>
                        </li>
                    
                        <li class="feature">
                            <div class="feature__icon">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13 10V3L4 14H11L11 21L20 10H13Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="feature__content">
                                <h3 class="feature__title">Sesión Inteligente</h3>
                                <p class="feature__desc">Mantén tu sesión activa de forma segura</p>
                            </div>
                        </li>
                        
                        <li class="feature">
                            <div class="feature__icon">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 19C13.4183 19 17 15.4183 17 11C17 6.58172 13.4183 3 9 3C4.58172 3 1 6.58172 1 11C1 15.4183 4.58172 19 9 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="feature__content">
                                <h3 class="feature__title">Dashboard Personalizado</h3>
                                <p class="feature__desc">Accede a tus reportes y gráficas personalizadas</p>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- Panel derecho (formulario) -->
                <div class="password-reset__right">
                    <div class="formwrap">
                        <h2 class="formwrap__title">CAMBIO DE CONTRASEÑA</h2>
                        <p class="formwrap__subtitle">
                            Ingresa la nueva contraseña:<br>
                            Mínimo 8 caracteres, al menos una mayúscula, una minúscula y un número o símbolo
                        </p>
                
                        <form id="passwordResetForm" class="form" novalidate>
                            <!-- Mensajes de estado -->
                            <div id="passwordResetMessages" class="form__messages" style="display: none;"></div>
                            
                            <!-- Campo de nueva contraseña -->
                            <div class="form__row">
                                <label for="newPassword" class="label">Ingresa tu nueva contraseña:</label>
                                <div class="field">
                                    <svg class="field__icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M14 6V4.5C14 2.567 12.433 1 10.5 1H7.5C5.567 1 4 2.567 4 4.5V6M3 6H15C15.552 6 16 6.448 16 7V15C16 15.552 15.552 16 15 16H3C2.448 16 2 15.552 2 15V7C2 6.448 2.448 6 3 6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <input 
                                        type="password" 
                                        id="newPassword" 
                                        name="newPassword" 
                                        placeholder="••••••••••••" 
                                        required
                                        minlength="8"
                                        autocomplete="new-password"
                                    >
                                    <button type="button" class="field__toggle" id="toggleNewPassword" aria-label="Mostrar contraseña">
                                        <svg class="eye-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 9S4 3 9 3S17 9 17 9S14 15 9 15S1 9 1 9Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/>
                                        </svg>
                                        <svg class="eye-off-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                                            <path d="M1 9S4 3 9 3S17 9 17 9S14 15 9 15S1 9 1 9Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                            <circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/>
                                            <path d="M1 1L17 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </button>
                                </div>
                        <div class="form__requirements" id="passwordRequirements">
                            <div class="requirement" id="lengthReq">
                                <span class="requirement__icon">✗</span>
                                <span class="requirement__text">Mínimo 8 caracteres</span>
                            </div>
                            <div class="requirement" id="uppercaseReq">
                                <span class="requirement__icon">✗</span>
                                <span class="requirement__text">Al menos una mayúscula</span>
                            </div>
                            <div class="requirement" id="lowercaseReq">
                                <span class="requirement__icon">✗</span>
                                <span class="requirement__text">Al menos una minúscula</span>
                            </div>
                            <div class="requirement" id="numberSymbolReq">
                                <span class="requirement__icon">✗</span>
                                <span class="requirement__text">Al menos un número o símbolo</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Campo de confirmación de contraseña -->
                    <div class="form__row">
                        <label for="confirmPassword" class="label">Confirme su nueva contraseña:</label>
                        <div class="field">
                            <svg class="field__icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 6V4.5C14 2.567 12.433 1 10.5 1H7.5C5.567 1 4 2.567 4 4.5V6M3 6H15C15.552 6 16 6.448 16 7V15C16 15.552 15.552 16 15 16H3C2.448 16 2 15.552 2 15V7C2 6.448 2.448 6 3 6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input 
                                type="password" 
                                id="confirmPassword" 
                                name="confirmPassword" 
                                placeholder="••••••••••••" 
                                required
                                minlength="8"
                                autocomplete="new-password"
                            >
                            <button type="button" class="field__toggle" id="toggleConfirmPassword" aria-label="Mostrar contraseña">
                                <svg class="eye-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 9S4 3 9 3S17 9 17 9S14 15 9 15S1 9 1 9Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                <svg class="eye-off-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                                    <path d="M1 9S4 3 9 3S17 9 17 9S14 15 9 15S1 9 1 9Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M1 1L17 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                        <div class="form__match-indicator" id="passwordMatch" style="display: none;">
                            <span class="match-icon">✗</span>
                            <span class="match-text">Las contraseñas no coinciden</span>
                        </div>
                    </div>
                    
                    <!-- Botón de envío -->
                    <button type="submit" class="btn btn--primary btn--full" id="resetPasswordBtn">
                        <span id="resetPasswordBtnText">Guardar Contraseña</span>
                        <div id="resetPasswordSpinner" class="spinner" style="display: none;">
                            <div class="spinner__circle"></div>
                        </div>
                    </button>
                </form>
                
                <!-- Enlaces adicionales -->
                <div class="formwrap__footer">
                    <p class="footer__text">
                        ¿Ya tienes una cuenta? 
                        <a href="/login" class="footer__link">Iniciar Sesión</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="/static/js/password-toggle.js?v=DEV"></script>
    <script src="/static/js/password-reset.js?v=DEV"></script>
</body>
</html>